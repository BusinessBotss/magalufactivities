```jsx
import { useState, useEffect, useRef } from 'react';

export default function App() {
  const [lang, setLang] = useState(() => localStorage.getItem('lang') || 'EN');
  const [lightMode, setLightMode] = useState(false);
  const [loading, setLoading] = useState(false);
  const formRef = useRef(null);

  const translations = {
    EN: {
      intro: "Book your favorite activities in Magaluf hassle-free.",
      labels: { time: "Time of Day", activity: "Select Activity", participants: "Number of Participants", phone: "Phone Number", notes: "Additional Notes (optional)" },
      placeholders: { time: "-- Choose Time --", activity: "-- Choose Activity --" },
      activities: { day: ["Oceans Beach Club Tickets","Jetski Rental","Boat Party","Boat Rentals","Quad Rental"], night: ["Pirates Adventure","Gringo's Bingo","MCP Pass"] },
      submit: "Book via WhatsApp", help: "Need help? Chat with Pepe →", disclaimer: "Reservations pending until confirmed via WhatsApp."
    },
    ES: {
      intro: "Reserva tus actividades favoritas en Magaluf de forma rápida y sencilla.",
      labels: { time: "Momento del Día", activity: "Selecciona Actividad", participants: "Número de Participantes", phone: "Número de Teléfono", notes: "Notas Adicionales (opcional)" },
      placeholders: { time: "-- Elige Momento --", activity: "-- Elige Actividad --" },
      activities: { day: ["Entradas Oceans Beach Club","Alquiler de Jetski","Fiesta en Barco","Alquiler de Barco","Alquiler de Quad"], night: ["Pirates Adventure","Bingo de Gringo's","MCP Pass"] },
      submit: "Reservar por WhatsApp", help: "¿Necesitas ayuda? Habla con Pepe →", disclaimer: "Reservas pendientes hasta confirmación por WhatsApp."
    },
    FR: {
      intro: "Réservez vos activités préférées à Magaluf en toute simplicité.",
      labels: { time: "Moment de la Journée", activity: "Choisir une Activité", participants: "Nombre de Participants", phone: "Numéro de Téléphone", notes: "Notes Supplémentaires (facultatif)" },
      placeholders: { time: "-- Choisir Moment --", activity: "-- Choisir Activité --" },
      activities: { day: ["Billets Oceans Beach Club","Location de Jetski","Fête en Bateau","Location de Bateau","Location de Quad"], night: ["Pirates Adventure","Bingo de Gringo's","Pass MCP"] },
      submit: "Réserver via WhatsApp", help: "Besoin d'aide ? Parlez à Pepe →", disclaimer: "Réservations en attente jusqu'à confirmation via WhatsApp."
    },
    DE: {
      intro: "Buche deine Lieblingsaktivitäten in Magaluf ganz einfach.",
      labels: { time: "Tageszeit", activity: "Aktivität wählen", participants: "Teilnehmerzahl", phone: "Telefonnummer", notes: "Zusätzliche Notizen (optional)" },
      placeholders: { time: "-- Wähle Zeit --", activity: "-- Wähle Aktivität --" },
      activities: { day: ["Oceans Beach Club Tickets","Jetski Verleih","Bootsparty","Bootsverleih","Quad Verleih"], night: ["Pirates Adventure","Gringo's Bingo","MCP Pass"] },
      submit: "Per WhatsApp buchen", help: "Brauchen Sie Hilfe? Sprechen Sie mit Pepe →", disclaimer: "Reservierungen ausstehend bis Bestätigung via WhatsApp."
    },
    IT: {
      intro: "Prenota le tue attività preferite a Magaluf in modo semplice.",
      labels: { time: "Momento del Giorno", activity: "Seleziona Attività", participants: "Numero di Partecipanti", phone: "Numero di Telefono", notes: "Note Aggiuntive (opzionale)" },
      placeholders: { time: "-- Scegli Momento --", activity: "-- Scegli Attività --" },
      activities: { day: ["Biglietti Oceans Beach Club","Noleggio Jetski","Festa in Barca","Noleggio Barca","Noleggio Quad"], night: ["Pirates Adventure","Gringo's Bingo","MCP Pass"] },
      submit: "Prenota via WhatsApp", help: "Hai bisogno di aiuto? Parla con Pepe →", disclaimer: "Prenotazioni in attesa fino a conferma via WhatsApp."
    }
  };

  const whatsappNumber = "+34644075065";

  useEffect(() => {
    document.documentElement.setAttribute('lang', lang);
    updateUI();
  }, [lang]);

  useEffect(() => {
    const savedParticipants = localStorage.getItem('participants');
    const savedPhone = localStorage.getItem('phone');
    if (savedParticipants) formRef.current?.participants.value = savedParticipants;
    if (savedPhone) formRef.current?.phone.value = savedPhone;
  }, []);

  const updateUI = () => {
    const t = translations[lang];
    document.querySelectorAll('.lang-btn').forEach(b => 
      b.classList.toggle('active', b.textContent === lang)
    );
  };

  const handleLanguageChange = (newLang) => {
    setLang(newLang);
    localStorage.setItem('lang', newLang);
  };

  const handleTimeChange = (e) => {
    const selectedTime = e.target.value;
    const activitySelect = formRef.current?.activity;
    if (!selectedTime || !activitySelect) return;

    const t = translations[lang];
    activitySelect.innerHTML = `<option value="" disabled selected>${t.placeholders.activity}</option>`;
    
    t.activities[selectedTime]?.forEach(activityName => {
      const option = document.createElement('option');
      option.value = activityName;
      option.textContent = activityName;
      activitySelect.appendChild(option);
    });
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    
    const formData = new FormData(e.target);
    const activityValue = formData.get('activity');
    const phoneValue = formData.get('phone');

    if (!activityValue) {
      alert("Por favor selecciona una actividad.");
      return;
    }

    if (phoneValue.length < 9) {
      alert("Por favor introduce un número válido.");
      return;
    }

    setLoading(true);
    const participantsValue = formData.get('participants');
    const notesValue = formData.get('notes');

    // Save to localStorage
    localStorage.setItem('participants', participantsValue);
    localStorage.setItem('phone', phoneValue);

    const msg = `Hi! I'd like to book *${activityValue}* (${formRef.current.timeCategory.options[formRef.current.timeCategory.selectedIndex].text}) for *${participantsValue}* participants. Phone: ${phoneValue}. Notes: ${notesValue||'-'}.`;

    setTimeout(() => {
      window.open(`https://wa.me/${whatsappNumber}?text=${encodeURIComponent(msg)}`, '_blank');
      setLoading(false);
    }, 1000);
  };

  const currentTranslation = translations[lang];

  return (
    <div className={`min-h-screen flex flex-col transition-colors duration-300 ${lightMode ? 'bg-white text-black' : 'bg-black text-white'}`}>
      {/* SEO & Social Sharing */}
      <meta property="og:title" content="Magaluf Bookings" />
      <meta property="og:description" content={currentTranslation.intro} />
      <meta name="twitter:card" content="summary_large_image" />

      <div className="container mx-auto px-4 py-8 max-w-md">
        <nav className="flex justify-center space-x-2 mb-6">
          {Object.keys(translations).map(code => (
            <button
              key={code}
              className={`lang-btn px-3 py-1 rounded-full text-sm font-medium transition-all ${
                lang === code 
                  ? 'bg-gradient-to-r from-pink-500 to-purple-600 text-white shadow-lg shadow-pink-500/30' 
                  : 'bg-opacity-20 hover:bg-opacity-30'
              }`}
              onClick={() => handleLanguageChange(code)}
            >
              {code}
            </button>
          ))}
        </nav>

        <p className="intro text-xl mb-8 text-center">{currentTranslation.intro}</p>

        <form ref={formRef} id="booking-form" onSubmit={handleSubmit} className="space-y-6">
          <div className="field">
            <label htmlFor="time-category" className="block mb-2 font-semibold">
              {currentTranslation.labels.time}
            </label>
            <select
              id="time-category"
              name="time-category"
              onChange={handleTimeChange}
              className="w-full bg-opacity-20 border border-opacity-30 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all"
              required
            >
              <option value="" disabled selected>
                {currentTranslation.placeholders.time}
              </option>
              {Object.keys(currentTranslation.activities).map(key => (
                <option key={key} value={key}>
                  {key.charAt(0).toUpperCase() + key.slice(1)}
                </option>
              ))}
            </select>
          </div>

          <div className="field">
            <label htmlFor="activity" className="block mb-2 font-semibold">
              {currentTranslation.labels.activity}
            </label>
            <select
              id="activity"
              name="activity"
              className="w-full bg-opacity-20 border border-opacity-30 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all"
              required
            >
              <option value="" disabled selected>
                {currentTranslation.placeholders.activity}
              </option>
            </select>
          </div>

          <div className="field">
            <label htmlFor="participants" className="block mb-2 font-semibold">
              {currentTranslation.labels.participants}
            </label>
            <input
              type="number"
              id="participants"
              name="participants"
              min="1"
              defaultValue="1"
              required
              className="w-full bg-opacity-20 border border-opacity-30 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all"
            />
          </div>

          <div className="field">
            <label htmlFor="phone" className="block mb-2 font-semibold">
              {currentTranslation.labels.phone}
            </label>
            <input
              type="tel"
              id="phone"
              name="phone"
              placeholder="+34 600 000 000"
              required
              className="w-full bg-opacity-20 border border-opacity-30 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all"
            />
          </div>

          <div className="field">
            <label htmlFor="notes" className="block mb-2 font-semibold">
              {currentTranslation.labels.notes}
            </label>
            <textarea
              id="notes"
              name="notes"
              rows="3"
              className="w-full bg-opacity-20 border border-opacity-30 rounded-lg p-3 resize-y focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all"
            ></textarea>
          </div>

          <button
            type="submit"
            className="btn w-full bg-gradient-to-r from-pink-500 to-purple-600 text-white font-bold py-3 px-6 rounded-full shadow-lg hover:shadow-xl hover:shadow-pink-500/30 transform hover:-translate-y-0.5 transition-all duration-300"
          >
            {currentTranslation.submit}
          </button>

          {loading && (
            <div id="loading" className="text-center mt-4 text-pink-500">
              Loading...
            </div>
          )}
        </form>

        <footer className="mt-10 text-center">
          <p className="help-text mb-2 opacity-80">
            <a href={`https://wa.me/${whatsappNumber}`} target="_blank" rel="noopener noreferrer" className="hover:text-pink-500 transition-colors">
              {currentTranslation.help}
            </a>
          </p>
          <p className="disclaimer-text text-sm opacity-70">
            {currentTranslation.disclaimer}
          </p>
          
          <button
            onClick={() => setLightMode(!lightMode)}
            className="toggle-theme-btn mt-6 bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded-full transition-colors duration-300"
          >
            Toggle Theme
          </button>
        </footer>
      </div>
    </div>
  );
}
```
