<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Magaluf Bookings</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    /* Básicos y tema simplificado para evitar confusión */
    :root {
      --bg: #fff;
      --text: #111;
      --field-bg: #f5f5f5;
      --border: #ccc;
      --accent: #ff00cc;
      --btn-bg: #ff00cc;
      --btn-hover-bg: #a100ff;
    }
    body {
      background-color: var(--bg);
      color: var(--text);
      font-family: 'Poppins', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 1.5rem;
      min-height: 100vh;
    }
    .container {
      max-width: 400px;
      width: 100%;
      background: white;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    nav {
      display: flex;
      justify-content: center;
      margin-bottom: 1rem;
      gap: 0.5rem;
    }
    button.lang-btn {
      background: transparent;
      border: none;
      font-weight: 600;
      cursor: pointer;
      padding: 0.25rem 0.6rem;
      border-radius: 5px;
      color: var(--text);
    }
    button.lang-btn.active {
      background: var(--accent);
      color: white;
    }
    label {
      font-weight: 600;
      display: block;
      margin-bottom: 0.3rem;
    }
    select, input, textarea {
      width: 100%;
      padding: 0.7rem 1rem;
      font-size: 1rem;
      border: 1.5px solid var(--border);
      border-radius: 8px;
      background-color: var(--field-bg);
      margin-bottom: 1.2rem;
      box-sizing: border-box;
    }
    textarea {
      resize: vertical;
      min-height: 80px;
    }
    button#submit-btn {
      width: 100%;
      padding: 0.9rem;
      background-color: var(--btn-bg);
      color: white;
      font-weight: 700;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      font-size: 1.1rem;
      transition: background-color 0.3s ease;
    }
    button#submit-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    button#submit-btn:not(:disabled):hover {
      background-color: var(--btn-hover-bg);
    }
  </style>
</head>
<body>
  <div class="container">
    <nav id="lang-switch" aria-label="Language selection"></nav>
    <p id="intro-text" style="font-weight:600; margin-bottom:1rem;"></p>
    <form id="booking-form" novalidate>
      <label for="time-category" id="label-time"></label>
      <select id="time-category" name="time-category" required aria-required="true"></select>

      <label for="activity" id="label-activity"></label>
      <select id="activity" name="activity" required aria-required="true">
        <option value="" disabled selected>--</option>
      </select>

      <label for="participants" id="label-participants"></label>
      <input type="number" id="participants" name="participants" min="1" max="20" value="1" required aria-required="true" />

      <label for="phone" id="label-phone"></label>
      <input type="tel" id="phone" name="phone" placeholder="+34 600 000 000" pattern="\\+34\\s?\\d{9}" required aria-required="true" />

      <label for="notes" id="label-notes"></label>
      <textarea id="notes" name="notes" rows="3"></textarea>

      <button type="submit" id="submit-btn" disabled></button>
    </form>
  </div>

  <script>
    (function() {
      const whatsappNumber = '34644075065';
      const translations = {
        EN: {
          intro: "Book your favorite activities in Magaluf hassle-free.",
          labels: {
            time: "Time of Day",
            activity: "Select Activity",
            participants: "Number of Participants",
            phone: "Phone Number",
            notes: "Additional Notes (optional)"
          },
          placeholders: {
            time: "-- Choose Time --",
            activity: "-- Choose Activity --"
          },
          activities: {
            day: ["Oceans Beach Club Tickets","Jetski Rental","Boat Party","Boat Rentals","Quad Rental"],
            night: ["Pirates Adventure","Gringo's Bingo","MCP Pass"]
          },
          submit: "Book via WhatsApp"
        },
        ES: {
          intro: "Reserva tus actividades favoritas en Magaluf de forma rápida y sencilla.",
          labels: {
            time: "Momento del Día",
            activity: "Selecciona Actividad",
            participants: "Número de Participantes",
            phone: "Número de Teléfono",
            notes: "Notas Adicionales (opcional)"
          },
          placeholders: {
            time: "-- Elige Momento --",
            activity: "-- Elige Actividad --"
          },
          activities: {
            day: ["Entradas Oceans Beach Club","Alquiler de Jetski","Fiesta en Barco","Alquiler de Barco","Alquiler de Quad"],
            night: ["Pirates Adventure","Bingo de Gringo's","MCP Pass"]
          },
          submit: "Reservar vía WhatsApp"
        }
      };

      const el = {
        langSwitch: document.getElementById('lang-switch'),
        introText: document.getElementById('intro-text'),
        labelTime: document.getElementById('label-time'),
        labelActivity: document.getElementById('label-activity'),
        labelParticipants: document.getElementById('label-participants'),
        labelPhone: document.getElementById('label-phone'),
        labelNotes: document.getElementById('label-notes'),
        selectTime: document.getElementById('time-category'),
        selectActivity: document.getElementById('activity'),
        inputParticipants: document.getElementById('participants'),
        inputPhone: document.getElementById('phone'),
        textareaNotes: document.getElementById('notes'),
        submitBtn: document.getElementById('submit-btn'),
        form: document.getElementById('booking-form')
      };

      let currentLang = localStorage.getItem('lang') || 'ES';

      function renderLangButtons() {
        ['EN','ES'].forEach(code => {
          const btn = document.createElement('button');
          btn.type = 'button';
          btn.textContent = code;
          btn.className = 'lang-btn';
          if(code === currentLang) btn.classList.add('active');
          btn.addEventListener('click', () => setLanguage(code));
          el.langSwitch.appendChild(btn);
        });
      }

      function setLanguage(lang) {
        currentLang = lang;
        localStorage.setItem('lang', lang);
        [...el.langSwitch.children].forEach(b => b.classList.toggle('active', b.textContent === lang));
        updateUI();
      }

      function updateUI() {
        const t = translations[currentLang];
        el.introText.textContent = t.intro;
        el.labelTime.textContent = t.labels.time;
        el.labelActivity.textContent = t.labels.activity;
        el.labelParticipants.textContent = t.labels.participants;
        el.labelPhone.textContent = t.labels.phone;
        el.labelNotes.textContent = t.labels.notes;
        el.submitBtn.textContent = t.submit;

        // Rellenar select tiempos
        el.selectTime.innerHTML = `<option value="" disabled selected>${t.placeholders.time}</option>`;
        Object.keys(t.activities).forEach(k => {
          el.selectTime.insertAdjacentHTML('beforeend', `<option value="${k}">${k.charAt(0).toUpperCase() + k.slice(1)}</option>`);
        });

        // Reset actividad
        el.selectActivity.innerHTML = `<option value="" disabled selected>${t.placeholders.activity}</option>`;

        validateForm();
      }

      function fillActivities() {
        const t = translations[currentLang];
        const selectedTime = el.selectTime.value;
        if (!selectedTime) {
          el.selectActivity.innerHTML = `<option value="" disabled selected>${t.placeholders.activity}</option>`;
          return;
        }
        const acts = t.activities[selectedTime] || [];
        el.selectActivity.innerHTML = `<option value="" disabled selected>${t.placeholders.activity}</option>`;
        acts.forEach(act => {
          el.selectActivity.insertAdjacentHTML('beforeend', `<option value="${act}">${act}</option>`);
        });
      }

      function validateForm() {
        const t = translations[currentLang];
        const valid = el.selectTime.value && el.selectActivity.value && el.inputParticipants.value >= 1 && el.inputPhone.checkValidity();
        el.submitBtn.disabled = !valid;
      }

      function submitForm(e) {
        e.preventDefault();
        const t = translations[currentLang];
        const msg = `Hi! I'd like to book *${el.selectActivity.value}* (${el.selectTime.selectedOptions[0].text}) for *${el.inputParticipants.value}* participants. Phone: ${el.inputPhone.value}. Notes: ${el.textareaNotes.value || '-'}.`;
        const url = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(msg)}`;
        window.open(url, '_blank');
      }

      // Listeners
      el.selectTime.addEventListener('change', () => {
        fillActivities();
        validateForm();
      });
      el.selectActivity.addEventListener('change', validateForm);
      el.inputParticipants.addEventListener('input', validateForm);
      el.inputPhone.addEventListener('input', validateForm);
      el.form.addEventListener('submit', submitForm);

      // Inicialización
      renderLangButtons();
      setLanguage(currentLang);

    })();
  </script>
</body>
</html>